import raycast
from PIL import Image, ImageDraw

size = 500

if __name__ == "__main__":
    # 6.282 - 360
    # 1.5705 - 90

    Map = [
        0b11111111111111111111111111111111,
        0b10000000000000000000000000000001,
        0b10100010010000000000000010000001,
        0b10000000000000000000000000000001,
        0b10000000001001000000000000000001,
        0b10001000000000000000000001000001,
        0b10000000000100000000000000000001,
        0b10010000000000000000000000000001,
        0b10000000000000000000000100000001,
        0b10010000010000000000000000000001,
        0b10000000000100000000000000000001,
        0b10000000000000000000000000000001,
        0b10000100000000000000000100000001,
        0b10000000100000000000000000000001,
        0b10000000000000000000000100000001,
        0b10000001000000000000000000000001,
        0b10000000000000000000000000000001,
        0b10000000000000000000000100000001,
        0b10000000001000010000000000000001,
        0b10000000000000000000100000000001,
        0b10000000000000000000000000000001,
        0b10000000000000000000000000100001,
        0b10000000000000010000000000000001,
        0b10000000000000000000000000000001,
        0b10000000100000000000000010000001,
        0b10000010000000000000100000000001,
        0b10000000000000000000000000000001,
        0b10000000010000000000000000000001,
        0b10000000000000001000000000000001,
        0b10000100000000000000000000000001,
        0b10000000000000000000000000000001,
        0b11111111111111111111111111111111,
    ]

    # noinspection PyUnresolvedReferences
    state = raycast.create_state(Map, 16, 16, 1.5705)
    # noinspection PyUnresolvedReferences
    data = raycast.return_view(state)
    img = Image.new("L", (size, size))
    draw = ImageDraw.Draw(img)
    for line in data:
        draw.line([(line[0], line[1]), (line[0], line[1] + line[2] - 1)],
                  fill=(int(line[2] / (size / 2) * 255),),
                  width=1)
    img.save(f"img.png")
